<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<style>

		html,body,input,select{
			font:normal normal normal 10px/10px Verdana;
		}

		th {
			border: solid 0px #DDDDDD;
			background-color: #DDDDDD;
			padding: 3px;
		}

		td {
			border: solid 1px #DDDDDD;
			background-color: #FAFAFA;
			padding: 3px;
		}

	</style>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>

	<script type="text/javascript">

		var paraules = [
			'hanging in there'
		];
		var num_res = 0;


		$(function() {
			// gapi.load('auth', init);

			// var strvar = '[["media","mean",,,10],[,,,"mn"]]';
			// eval("var r = " + strvar + ";");
			// $('body').prepend('ok' + r[0][2]);

			// ini_trans();
			translate_list();

		});

		function translate_list() {

			num_res = 0;
			for (var t = 0; t < paraules.length; t++) {
				ini_trans(paraules[t]);
			}

		}


		function ini_trans(word) {
			$.post("gtrans_hook.php",
				{ 	paraula			:	word.replace(/ /g, "+")
				},
				function(data, status) {
					// alert('DOCUMENT XML : ' + data.children[0].innerHTML);
					if (status != 'success') {
						alert('Error de transacció');
					} else {

						var newline = String.fromCharCode(13, 10);

						var strvar = '[["media","mean",,,10],[,,,"mn"]]';
						eval("var res = " + data + ";");

						var ori_word = res[0][0][1];
						var tra_word = res[0][0][0];

						if (res[1]) {

							for (var q = 0; q < res[1].length; q++) {

								var translat = '';
								var kind_word = '';

								// $('#id_textarea_res').val($('#id_textarea_res').val() + "type[" + q + "] -> " + res[1][q][0] + newline);
								var coma = '';
								for (var t = 0; t < res[1][q][1].length; t++) {
									translat += coma + res[1][q][1][t];
									kind_word = res[1][q][0];
									coma = ',';
								}

								// Afegir paraula per cada tipus
								$('#id_tbody1').append("<tr>")
									.append('<td>' + (num_res++) + '</td>')
									.append('<td>' + ori_word 	+ '</td>')
									.append('<td>' + tra_word 	+ '</td>')
									.append('<td>' + kind_word 	+ '</td>')
									.append('<td>' + translat 	+ '</td>')
									.append('</tr>');
							}
						} else {
							var translat = tra_word;
							var kind_word = '?';
							$('#id_tbody1').append("<tr>")
								.append('<td>' + (num_res++) + '</td>')
								.append('<td>' + ori_word 	+ '</td>')
								.append('<td>' + tra_word 	+ '</td>')
								.append('<td>' + kind_word 	+ '</td>')
								.append('<td>' + translat 	+ '</td>')
								.append('</tr>');
						}


						// $('#id_textarea_res').text(data);
						// $('body').prepend('ok');


					}
				}
			);
		}


	</script>
</head>

<body style="width: 100%; height: 100%;">

	<table>
		<thead>
			<tr>
				<th>num</th>
				<th>word</th>
				<th>1trans</th>
				<th>kind</th>
				<th>translations</th>
			<tr>
		</thead>
		<tbody id="id_tbody1">
			<tr>
				<td>1</td>
				<td>mean</td>
				<td>media</td>
				<td>noun</td>
				<td>media,medio,promedio,término medio</td>
			<tr>
			<tr>
				<td>2</td>
				<td>proponents</td>
				<td>proponentes</td>
				<td>verb</td>
				<td>proponente,defensor,autor</td>
			<tr>
		</tbody>
	</table>

</body>
</html>
